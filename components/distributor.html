<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../css/reset.css">
    <link rel="stylesheet" href="../css/common.css">
    <link rel="stylesheet" href="../css/public.css" />
    <link rel="stylesheet" href="../css/distributor.css">
    <link rel="stylesheet" href="/css/vivify.min.css" />
    <script type="text/javascript" src="/js/public.js"></script>
    <title>经销商</title>
</head>

<body>
    <section class="header"></section>
    <section class="banner">
        <img src="../img/become-dealar-pc.png" alt="">
        <section class="banner-text">
            <h1>成为经销商合作伙伴</h1>
            <p>提升全球农业生产效率，构建一个满足人类未来 100 年发展需求的农业生态系统，让全世界的人们都能获得充足、丰富和安全的食物。</p>
        </section>
    </section>
    <section class="contain">
        <section class="contain-form">
            <form action="http://127.0.0.1:8081/add" method="post" target="targetIfr">
                <section class="clas">
                    <p>申请合作类型</p>
                    <select name="cooperation_type" id="cooperation_type" class="selected">
                        <option disabled selected>*选择合作类型</option>
                        <option value="1">分销合作</option>
                        <option value="2">经销合作</option>
                    </select>
                </section>
                <section class="clas">
                    <p>申请合作产品类型</p>
                    <select name="cooperative_products" id="cooperative_products" class="selected">
                        <option disabled selected>*选择合作产品类型</option>
                        <option value="1">农业无人机</option>
                        <option value="2">植保</option>
                        <option value="2">农业物联网</option>
                    </select>
                    <section class="input-confirm">
                        <p>申请人信息</p>
                        <input class="input_style" type="text" id="username" name="username" placeholder="*姓名">
                        <input class="input_style" type="text" id="mobile" name="mobile" placeholder="*手机号">
                        <input class="input_style" type="text" id="email" name="email" placeholder="*邮箱">
                    </section>
                </section>
            </form>
            <section class="input-s">
                <input type="button" onclick="autoSubmit()" class="submit" value="提交">
            </section>

        </section>
        <section class="tips">
            <section class="tip-l">
                <h1>400-200-3030</h1>
                <p>周一至周五</p>
                <p>9:00-12:00&nbsp;&nbsp;14:00-18:00</p>
            </section>
            <section class="tip-r">
                <img src="../img/bdsq-contact-icon-pc.png" alt="">
            </section>
        </section>
    </section>
    </section>
    <section class="footer"></section>
</body>
<script type="text/javascript" src="https://vncdn.mobi88.cn/public/jquery-2.1.3.min.js"></script>
<script type="text/javascript" src="../js/md5.js"></script>
<script type="text/javascript" src="../js/LanguagePublic.js"></script>
</script>
<script type="text/javascript">
    $(function() {
        $(".header").load("../common/header.html");
        $(".footer").load("../common/fooder.html");


    });
    $(".tip-r").click(function() {
        if ($(".tip-l").css("display") == "none") {
            $(".tip-l").show();
        } else {
            $(".tip-l").hide();
        }
    });

    function isPoneAvailable(telephone) {
        var myreg = /^[1][3,4,5,7,8][0-9]{9}$/;
        if (!myreg.test(telephone)) {
            console.log(telephone)
            return false;
        } else {
            return true;
        }
    };

    function isEMail(v) {
        var reg = /^\w+((.\w+)|(-\w+))@[A-Za-z0-9]+((.|-)[A-Za-z0-9]+).[A-Za-z0-9]+$/; //正则表达式
        if (!reg.test(v)) { //正则验证不通过，格式不对
            return false;
        } else {
            return true;
        }
    }

    function autoSubmit() {
        var nvc_cooperation_type = document.getElementById(`cooperation_type`).value;
        var nvc_cooperative_products = document.getElementById(`cooperative_products`).value;
        var nvc_user_name = document.getElementById(`username`).value;
        var nvc_mobile = document.getElementById(`mobile`).value;
        var nvc_email = document.getElementById(`email`).value;
        console.log(isPoneAvailable(nvc_mobile))
        console.log(isEMail(nvc_email))
        if (nvc_cooperation_type == '*选择合作类型') {
            alert('请选择合作类型')
            return false;
        }
        if (nvc_cooperative_products == '*选择合作产品类型') {
            alert('请选择合作产品类型')
            return false;
        }
        if (nvc_user_name == '' || !nvc_user_name) {
            alert('请输入姓名')
            return false;
        }
        if (!isPoneAvailable(nvc_mobile)) {
            alert('请输入正确的手机号')
            return false;
        }
        if (!isEMail(nvc_email)) {
            alert('请输入正确的邮箱号')
            return false;
        }
        // http://localhost:1337/api/user/addUser
        $.post(`http://39.103.133.174:1337/api/user/addUser`, {
            username: nvc_user_name,
            mobile: nvc_mobile,
            email: nvc_email,
            cooperation_type: nvc_cooperation_type,
            cooperative_products: nvc_cooperative_products,
        }, function(data) {
            console.log(data)
            if (data.code == 200) {
                alert(data.message)
                window.location.href = '../index.html'
            } else {

            }
        });
    }
</script>

</html>